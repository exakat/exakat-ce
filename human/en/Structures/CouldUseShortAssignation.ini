name = "Could Use Short Assignation";
description = "Use short assignment operator, to speed up code, and keep syntax clear.

Some operators, like * or +, have a compact and fast 'do-and-assign' version. They looks like a compacted version for = and the operator. This syntax is good for readability, and saves some memory in the process. 

Depending on the operator, not all permutations of arguments are possible. For example, ``$a = $a - 2`` can use the ``-=`` short operator, but ``$a = 2 - $a`` doesn't. 

Addition and short assignation of addition have a different set of features when applied to arrays. Do not exchange one another in that case.

Short operators are faster than the extended version, though it is a micro-optimization.";
code = "<?php

$a = 10 + $a;
$a += 10;

$b = $b - 1;
$b -= 1;

$c = $c * 2;
$c *= 2;

$d = $d / 3;
$d /= 3;

$e = $e % 4;
$e %= 4;

$f = $f | 5;
$f |= 5;

$g = $g & 6;
$g &= 6;

$h = $h ^ 7;
$h ^= 7;

$i = $i >> 8;
$i >>= 8;

$j = $j << 9;
$j <<= 9;

// PHP 7.4 and more recent
$l = $l ?? 'value';
$l ??= 'value';

?>";
clearphp = "use-short-assignations";
severity = "S_MINOR";
; from : S_NONE, S_MINOR, S_MAJOR, S_CRITICAL
timetofix = "T_INSTANT";
; from : T_INSTANT, T_QUICK, T_SLOW
exakatSince = "0.8.4";
precision = "P_VERY_HIGH";
; from : P_VERY_HIGH, P_HIGH, P_MEDIUM, P_LOW, P_UNKNOWN
modifications[] = "Change the expression to use the short assignation";
; Alternative to make this code go away. 
; One by possible solution

features[] = "short-assignation";
; Name of a PHP feature. 
; This should match one of the available feature description in humane/en/Features

seeAlso[] = "`Assignation Operators <https://www.php.net/manual/en/language.operators.assignment.php>`_";
; List of links of interest

related[] = "";
; Possible other rules that might be related to this one. 
; Use "Folder/Name" format, one each
phpVersion = "";
; Versions when this feature was deprecated. Beyond is removed, and before is fine.
; This might need a range : 7.3-7.4.

phpDeprecation = "";
; Versions when this feature was deprecated. Beyond is removed, and before is fine.
; This might need a range : 7.3-7.4.
phpErrors[] = "";
; A PHP error that may be emitted by the target faulty code

keywords[] = "";
; Human readable keywords for manual glossary

changedBehavior = "";
; Which version did that behavior changed
changedBehavior_details = "";


[example1]
project = "ChurchCRM";
file = "src/ChurchCRM/utils/GeoUtils.php";
line = "74";
code = "$distance = 0.6213712 * $distance;";
explain = "Sometimes, the variable is on the other side of the operator.";

[example2]
project = "Thelia";
file = "local/modules/Tinymce/Resources/js/tinymce/filemanager/include/utils.php";
line = "70";
code = "$size = $size / 1024;";
explain = "/= is rare, but it definitely could be used here.";
