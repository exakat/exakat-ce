name = "PHP Native Class Type Compatibility";
description = "PHP enforces the method compatibility with native classes and interfaces. 

This means that classes that extends native PHP classes or interfaces must declare compatible types. They can't omit typing, like it was the case until PHP 8.0.
This is needed for compatibility with PHP 8.0. This is probably good for older versions too, although it is not reported.

The attribute ``ReturnTypeWillChange`` is taken into account by this rule. Note that it is not detected when auditing with PHP < 8.0, so it won't have effect until this version. The attribute was declared in PHP 8.1, though it is also taken into account when auditing with PHP 8.0.";
code = "<?php

class a extends RecursiveFilterIterator { 

    // fully declared method
    function hasChildren(): bool {
        return true;
    }

    // key() returns mixed. Omitting the type used to be quiet
    function key() {}
    
    //    #[\ReturnTypeWillChange] is taken into account 

}
?>";
clearphp = "";
severity = "S_MAJOR";
; from : S_NONE, S_MINOR, S_MAJOR, S_CRITICAL
timetofix = "T_QUICK";
; from : T_INSTANT, T_QUICK, T_SLOW
exakatSince = "2.2.4";
precision = "P_HIGH";
; from : P_VERY_HIGH, P_HIGH, P_MEDIUM, P_LOW, P_UNKNOWN
modifications[] = "Make sure the methods are compatible or identical to the parent's method signature.";
; Alternative to make this code go away. 
; One by possible solution

features[] = "returntypewillchange";
features[] = "type-covariance";
features[] = "type-contravariance";
; Name of a PHP feature. 
; This should match one of the available feature description in humane/en/Features

seeAlso[] = "method-compatibility";
; List of links of interest

related[] = "";
; Possible other rules that might be related to this one. 
; Use "Folder/Name" format, one each
phpVersion = "";
; Versions when this feature was deprecated. Beyond is removed, and before is fine.
; This might need a range : 7.3-7.4.

phpDeprecation = "";
; Versions when this feature was deprecated. Beyond is removed, and before is fine.
; This might need a range : 7.3-7.4.
phpErrors[] = "Return type of a::key() should either be compatible with IteratorIterator::key(): mixed, or the #[\ReturnTypeWillChange] attribute should be used to temporarily suppress the notice";
; A PHP error that may be emitted by the target faulty code

keywords[] = "";
; Human readable keywords for manual glossary

changedBehavior = "";
; Which version did that behavior changed
changedBehavior_details = "";

